<!--
    <copyright>
		Created by Matt Weber <matt@badecho.com>
		Copyright @ 2025 Bad Echo LLC. All rights reserved.

		Bad Echo Technologies are licensed under the
		GNU Affero General Public License v3.0.

		See accompanying file LICENSE.md or a copy at:
		https://www.gnu.org/licenses/agpl-3.0.html
    </copyright>
-->
<badEcho:View x:Class="BadEcho.QuickActions.Views.ScriptActionView"
              x:ClassModifier="internal"
              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
              xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
              xmlns:badEcho="http://schemas.badecho.com/presentation/2022/02/xaml"
              xmlns:vm="clr-namespace:BadEcho.QuickActions.ViewModels"
              xmlns:sys="clr-namespace:System;assembly=mscorlib"
              xmlns:extensibility="clr-namespace:BadEcho.QuickActions.Extensibility;assembly=BadEcho.QuickActions.Extensibility"
              mc:Ignorable="d"
              d:DesignStyle="{StaticResource DesignTimeControlStyle}">
    <d:DesignProperties.DataContext>
        <vm:ScriptActionViewModel Name="SampleScript.ps1"
                                  Path="D:\scripts\SampleScript.ps1"
                                  Arguments="-d 10"
                                  ShellType="PowerShell"
                                  />
    </d:DesignProperties.DataContext>
    <badEcho:View.Resources>
        <Style x:Key="HeaderTextStyle" TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="Foreground" Value="{StaticResource TextFillColorTertiaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <Style x:Key="InputTextBoxStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <ObjectDataProvider x:Key="ShellTypeFromEnum"
                            MethodName="GetValues"
                            ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="extensibility:ShellType"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </badEcho:View.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Style="{StaticResource HeaderTextStyle}"
                   Text="Path"
                   Grid.Row="0" 
                   />

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="PathTextBox" 
                    Style="{StaticResource InputTextBoxStyle}" 
                     Text="{Binding Path, UpdateSourceTrigger=PropertyChanged}"
                     Grid.Column="0" 
                     />
            <Button Margin="4,0,0,4"
                    Grid.Column="1">
                <StackPanel Orientation="Horizontal">
                    <TextBlock FontFamily="{StaticResource SymbolThemeFontFamily}"
                               Text="&#xE8E5;"
                               Margin="0,3,0,0"
                               />
                    <TextBlock Text="Open"
                               Margin="8,0,0,0"/>
                </StackPanel>
            </Button>
        </Grid>

        <TextBlock Style="{StaticResource HeaderTextStyle}"
                   Text="Arguments"
                   Grid.Row="2"
                   />
        <TextBox Style="{StaticResource InputTextBoxStyle}"
                 Text="{Binding Arguments, UpdateSourceTrigger=PropertyChanged}"
                 Grid.Row="3"
                 />

        <TextBlock Style="{StaticResource HeaderTextStyle}"
                   Text="Shell Type"
                   Grid.Row="4"
                   />
        <ComboBox ItemsSource="{Binding Source={StaticResource ShellTypeFromEnum}}"
                  SelectedValue="{Binding ShellType}"
                  Margin="0,0,0,4"
                  Grid.Row="5"
                  />

        <Button Style="{StaticResource AccentButtonStyle}"
                Command="{Binding SaveCommand}"
                IsEnabled="{Binding IsDirty}"
                Content="Save"
                HorizontalAlignment="Center"
                Grid.Row="6"
                />
    </Grid>
</badEcho:View>
